<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel='stylesheet' type='text/css' href='main.css'>
    <title>Tweets</title>
  </head>
  <body>
    <div id='container'>
      <div id='header'>
      </div>
      <div id='content'>
        <div id='nav'>
          <ul>
            <li><a href=''>Home</a></li>
            <li><a href=''>Following</a></li>
            <li><a href=''>Followers</a></li>
          </ul>  
        </div>
        <div id='main'>
          <h2>Tweets</h2>
          <div id='tweets'></div>
        </div>
      </div>
      <div id='footer'>

      </div>
    </div>

    <!-- jQuery code here -->
    <script>
      $(document).ready(function(){

        function formatTweet(tweet) {
          var $tweet = $('<table><tr class="dateTime"></tr><tr class="content"></tr><tr class="user"></tr></table>');
          $tweet.find('.user').html('<a href="#">@' + tweet.user + '</a>');
          $tweet.find('.dateTime').text(tweet.created_at);
          $tweet.find('.content').text(tweet.message);
          return $tweet;
        }

        function displayAllTweets() {
          var $tweets = $('#tweets');
          $tweets.html('');

          var index = streams.home.length - 1;
          while(index >= 0) {
            var tweet = streams.home[index];
            var $tweet = formatTweet(tweet);
            $tweet.appendTo($tweets);
            index -= 1;
          }
        }  

        function displayFilteredTweets(userName) {
          var $tweets = $('#tweets');
          $tweets.html('');

          var index = streams.users[userName].length - 1;
          while(index >= 0) {
            var tweet = streams.users[userName][index];
            var $tweet = formatTweet(tweet);
            $tweet.appendTo($tweets);
            index -= 1;
          }
        }

        $('#tweets').on('click', '.user',function() {
          var userName = $(this).text().substr(1);
          displayFilteredTweets(userName);
        });

        displayAllTweets();

      });
    </script>
  </body>
</html>
